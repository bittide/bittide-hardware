# SPDX-FileCopyrightText: 2025 Google LLC
#
# SPDX-License-Identifier: Apache-2.0

name: 'Check Pull Request labels for merge block'

on:
  pull_request:
    types:
      - opened
      - labeled
      - unlabeled

jobs:
  do-not-merge:
    runs-on: ubuntu-latest
    steps:
      - name: Fail if 'do-not-merge' label is present
        run: |
          HAS_LABEL="${{ contains(github.event.pull_request.labels.*.name, 'do-not-merge') }}"

          echo "HAS_LABEL: ${HAS_LABEL}.."
          if [ "${HAS_LABEL}" == "true" ]; then
            exit 1
          else
            exit 0
          fi
